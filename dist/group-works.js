!function(t){var r={};function e(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var a in t)e.d(n,a,function(r){return t[r]}.bind(null,a));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="",e(e.s=60)}({60:function(t,r){function e(t,r){var e={works:0,articles:0,books:0,edits:0,year:t,titles:[]};return r.forEach((function(r){r.year===t&&(e.works++,"book"===r.publicationType&&e.books++,"edit"===r.publicationType&&(e.edits++,e.titles.push(r.title)),"article"===r.publicationType&&e.articles++)})),e}$(document).ready((function(){$.post("worksData",(function(t){var r=function(t){(t=t.map((function(t){return Number.parseInt(t.year)<1900?t.year=Number.parseInt(t.year)- -1e3:t.year=Number.parseInt(t.year),t}))).sort(function(t){var r=1;"-"===t[0]&&(r=-1,t=t.substr(1));return function(e,n){return(e[t]<n[t]?-1:e[t]>n[t]?1:0)*r}}("year"));for(var r=[],n=0;n<t[t.length-1].year-t[0].year- -1;n++)r.push(e(t[0].year- -n,t));return r}(t);!function(t){var r=d3.select("#svg-port"),e=$(".svg-port").width(),n=$(".svg-port").height();r.selectAll("*").remove();var a=d3.tip().attr("class","d3-tip").html((function(t){return jsStrings.vis.year[1]+" "+t.year+": "+t.works+" "+multiple(jsStrings.vis.work,t.works)+".</br> "+jsStrings.vis.including+" "+t.books+" "+jsStrings.vis.monographies+"."}));r.call(a);var o=n/2,i=e,s=d3.scaleBand().domain(t.map((function(t){return t.year}))).range([0,i-30]).paddingInner(.1).paddingOuter(.2),u=d3.scaleLinear().domain([0,d3.max(t,(function(t){return t.works}))]).range([0,o]);d3.scaleSequential(d3.interpolateCool).domain([d3.min(t,(function(t){return t.year})),d3.max(t,(function(t){return t.year}))]);r.select("g").empty()&&r.append("g").attr("id","bars");var l=r.select("g").selectAll("rect").data(t);l.enter().append("rect").attr("width",s.bandwidth()).attr("x",(function(t){return s(t.year)})).attr("y",o).attr("height",0).style("fill","#FFFFFF").attr("transform","translate( "+[30,o-20]+")").on("mouseover",a.show).on("mouseout",a.hide).transition().duration(1e3).attr("y",(function(t){return o-u(t.articles)})).attr("height",(function(t){return u(t.articles)})).style("fill","#8BC34A"),l.enter().append("rect").attr("width",s.bandwidth()).attr("x",(function(t){return s(t.year)})).attr("y",(function(t){return t.articles>0?o-u(t.works)-10:o-u(t.works)})).attr("height",0).style("fill","#f44336").attr("transform","translate( "+[30,o-20]+")").on("mouseover",a.show).on("mouseout",a.hide).transition().duration(1e3).attr("y",(function(t){return t.articles>0?o-u(t.works-t.edits)-10:o-u(t.works)})).attr("height",(function(t){return u(t.books)})),l.enter().append("rect").attr("width",s.bandwidth()).attr("x",(function(t){return s(t.year)})).attr("y",(function(t){return t.articles>0||t.books>0?o-u(t.works)-10:o-u(t.works)})).attr("height",0).style("fill","yellow").attr("transform","translate( "+[30,o-20]+")").on("mouseover",a.show).on("mouseout",a.hide).transition().duration(1e3).attr("y",(function(t){return t.articles>0&&t.books>0?o-u(t.works)-20:t.articles>0||t.books>0?o-u(t.works)-10:o-u(t.edits)})).attr("height",(function(t){return u(t.edits)})),l.exit().transition().duration(300).attr("width",0).remove();var c=d3.axisBottom(s);r.append("g").attr("id","x-axis").call(c).attr("transform","translate( "+[-e,n/2]+")").transition().duration(1e3).attr("transform","translate( "+[30,n-20]+")");var d=d3.axisLeft(u.domain(u.domain().reverse()));r.append("g").attr("id","y-axis").call(d).attr("transform","translate( "+[0,2*n]+")").transition().duration(1e3).attr("transform","translate( "+[30,n-o-20]+")")}(r),function(t){var r={meanPerYear:0,sumOfWorks:0,sumOfArticles:0};t.forEach((function(t,e){r.sumOfWorks+=Number.parseInt(t.works),r.sumOfArticles+=Number.parseInt(t.articles)})),r.meanPerYear=r.sumOfWorks/t.length,$("#mean-works-amount-display").text(r.meanPerYear.toFixed(2)),$("#publications-amount-display").text(r.sumOfArticles),$("#works-amount-display").text(r.sumOfWorks)}(r)}))}))}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc291cmNlcy9qcy9ncm91cC12aXN1YWxpc2F0aW9ucy93b3Jrcy5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImNvdW50WWVhck9jY3VyZW5jZXMiLCJ5ZWFyIiwiYXJyIiwicmVzT2JqIiwid29ya3MiLCJhcnRpY2xlcyIsImJvb2tzIiwiZWRpdHMiLCJ0aXRsZXMiLCJmb3JFYWNoIiwiZWwiLCJwdWJsaWNhdGlvblR5cGUiLCJwdXNoIiwidGl0bGUiLCIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsInBvc3QiLCJkYXRhIiwiYmFyRGF0YSIsImFsbFdvcmtzIiwibWFwIiwiTnVtYmVyIiwicGFyc2VJbnQiLCJzb3J0Iiwic29ydE9yZGVyIiwic3Vic3RyIiwiYSIsImIiLCJkeW5hbWljU29ydCIsImJhcnMiLCJsZW5ndGgiLCJnZXRCYXJzIiwic3ZnIiwiZDMiLCJzZWxlY3QiLCJ3aWR0aCIsImhlaWdodCIsInNlbGVjdEFsbCIsInJlbW92ZSIsImJhclllYXJUaXAiLCJ0aXAiLCJhdHRyIiwiaHRtbCIsImpzU3RyaW5ncyIsInZpcyIsIm11bHRpcGxlIiwid29yayIsImluY2x1ZGluZyIsIm1vbm9ncmFwaGllcyIsIm1heEJhckhlaWdodCIsIm1heEJhcldpZHRoIiwieFNjYWxlIiwic2NhbGVCYW5kIiwiZG9tYWluIiwicmFuZ2UiLCJwYWRkaW5nSW5uZXIiLCJwYWRkaW5nT3V0ZXIiLCJ5U2NhbGUiLCJzY2FsZUxpbmVhciIsIm1heCIsInNjYWxlU2VxdWVudGlhbCIsImludGVycG9sYXRlQ29vbCIsIm1pbiIsImVtcHR5IiwiYXBwZW5kIiwiZW50ZXIiLCJiYW5kd2lkdGgiLCJzdHlsZSIsIm9uIiwic2hvdyIsImhpZGUiLCJ0cmFuc2l0aW9uIiwiZHVyYXRpb24iLCJleGl0IiwieEF4aXMiLCJheGlzQm90dG9tIiwieUF4aXMiLCJheGlzTGVmdCIsInJldmVyc2UiLCJkcmF3V29ya3NPdmVyVGltZUdyYXBoIiwiZGlzcGxheVZhbHVlcyIsIm1lYW5QZXJZZWFyIiwic3VtT2ZXb3JrcyIsInN1bU9mQXJ0aWNsZXMiLCJpbmRleCIsInRleHQiLCJ0b0ZpeGVkIiwiZGlzcGxheVdvcmtTdGF0c1dvcmtzSW5UaW1lIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFB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S0FBS3ZCLEtBQUssS0FBTSxVQUFVdkUsS0FBSzBHLEdBQU9uQyxLQUFLLFlBQWEsY0FBZ0IsQ0FBQyxFQUFZLEVBQVRMLEdBQWMsS0FBS21DLGFBQWFDLFNBQVMsS0FBTS9CLEtBQUssWUFBYSxjQUFnQixDQUFDLEdBQUlMLEVBQVNhLEVBQWUsSUFBTSxLQTNIek04QixDQUF1QjdELEdBbVIxQixTQUFxQ0QsR0FFcEMsSUFBSStELEVBQWdCLENBQ25CQyxZQUFhLEVBQ2JDLFdBQVksRUFDWkMsY0FBZSxHQUdoQmxFLEVBQUtULFNBQVEsU0FBVVIsRUFBTW9GLEdBQzVCSixFQUFjRSxZQUFjN0QsT0FBT0MsU0FBU3RCLEVBQUtHLE9BQ2pENkUsRUFBY0csZUFBaUI5RCxPQUFPQyxTQUFTdEIsRUFBS0ksYUFFckQ0RSxFQUFjQyxZQUFjRCxFQUFjRSxXQUFhakUsRUFBS2EsT0FHNURqQixFQUFFLDhCQUE4QndFLEtBQUtMLEVBQWNDLFlBQVlLLFFBQVEsSUFDdkV6RSxFQUFFLGdDQUFnQ3dFLEtBQUtMLEVBQWNHLGVBQ3JEdEUsRUFBRSx5QkFBeUJ3RSxLQUFLTCxFQUFjRSxZQW5TNUNLLENBQTRCckUiLCJmaWxlIjoiZ3JvdXAtd29ya3MuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNjApO1xuIiwiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuXHQkLnBvc3QoXCJ3b3Jrc0RhdGFcIiwgZnVuY3Rpb24gKGRhdGEpIHtcblx0XHQvLyBjb25zb2xlLmxvZyhqc1N0cmluZ3MpXG5cdFx0XHR2YXIgYmFyRGF0YSA9IGdldEJhcnMoZGF0YSk7XG5cdFx0XHRkcmF3V29ya3NPdmVyVGltZUdyYXBoKGJhckRhdGEpO1xuXHRcdFx0ZGlzcGxheVdvcmtTdGF0c1dvcmtzSW5UaW1lKGJhckRhdGEpO1xuXHRcdH1cblx0KVxufSk7XG5cbmZ1bmN0aW9uIGRyYXdXb3Jrc092ZXJUaW1lR3JhcGgoZGF0YSkge1xuXHR2YXIgcmVkID0gXCIjZjQ0MzM2XCI7XG5cdHZhciBibHVlID0gXCIjMjZhNjlhXCI7XG5cdHZhciBzdGFja01hcmdpbiA9IDEwO1xuXHR2YXIgc3ZnID0gZDMuc2VsZWN0KFwiI3N2Zy1wb3J0XCIpLFxuXHRcdHdpZHRoID0gJChcIi5zdmctcG9ydFwiKS53aWR0aCgpLFxuXHRcdGhlaWdodCA9ICQoXCIuc3ZnLXBvcnRcIikuaGVpZ2h0KCk7XG5cdHN2Zy5zZWxlY3RBbGwoJyonKS5yZW1vdmUoKTtcblx0dmFyIGJhclllYXJUaXAgPSBkMy50aXAoKS5hdHRyKCdjbGFzcycsICdkMy10aXAnKS5odG1sKGZ1bmN0aW9uIChkKSB7XG5cdFx0cmV0dXJuIGpzU3RyaW5ncy52aXMueWVhcltcIjFcIl0gKyBcIiBcIiArIGQueWVhciArICc6ICcgKyBkLndvcmtzICsgXCIgXCIgKyBtdWx0aXBsZShqc1N0cmluZ3MudmlzLndvcmssIGQud29ya3MpICtcblx0XHQnLjwvYnI+ICcgKyBqc1N0cmluZ3MudmlzLmluY2x1ZGluZyArIFwiIFwiICsgZC5ib29rcyArICcgJyArIGpzU3RyaW5ncy52aXMubW9ub2dyYXBoaWVzICsgXCIuXCJcblx0fSk7XG5cdHN2Zy5jYWxsKGJhclllYXJUaXApO1xuXG5cdHZhciBtYXhCYXJIZWlnaHQgPSBoZWlnaHQgLyAyO1xuXHR2YXIgbWF4QmFyV2lkdGggPSB3aWR0aDtcblx0dmFyIHlTY2FsZVdpZHRoID0gMzA7XG5cdHZhciB4U2NhbGUgPSBkMy5zY2FsZUJhbmQoKVxuXHRcdC5kb21haW4oZGF0YS5tYXAoZnVuY3Rpb24gKGVsKSB7XG5cdFx0XHRyZXR1cm4gZWwueWVhcjtcblx0XHR9KSlcblx0XHQucmFuZ2UoWzAsIG1heEJhcldpZHRoIC0geVNjYWxlV2lkdGhdKVxuXHRcdC5wYWRkaW5nSW5uZXIoMC4xKVxuXHRcdC5wYWRkaW5nT3V0ZXIoMC4yKVxuXHR2YXIgeVNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKVxuXHRcdC5kb21haW4oWzAsIGQzLm1heChkYXRhLCBmdW5jdGlvbiAoZCkge1xuXHRcdFx0cmV0dXJuIGQud29ya3Ncblx0XHR9KV0pXG5cdFx0LnJhbmdlKFswLCBtYXhCYXJIZWlnaHRdKTtcblx0dmFyIGNvbG9yU2NhbGUgPSBkMy5zY2FsZVNlcXVlbnRpYWwoZDMuaW50ZXJwb2xhdGVDb29sKVxuXHRcdC5kb21haW4oW2QzLm1pbihkYXRhLCBmdW5jdGlvbiAoZWwpIHtcblx0XHRcdHJldHVybiBlbC55ZWFyXG5cdFx0fSksIGQzLm1heChkYXRhLCBmdW5jdGlvbiAoZWwpIHtcblx0XHRcdHJldHVybiBlbC55ZWFyXG5cdFx0fSldKTtcblxuXHRpZiAoc3ZnLnNlbGVjdCgnZycpLmVtcHR5KCkpIHN2Zy5hcHBlbmQoJ2cnKS5hdHRyKCdpZCcsICdiYXJzJyk7XG5cdHZhciBiYXJzID0gc3ZnLnNlbGVjdCgnZycpXG5cdFx0LnNlbGVjdEFsbCgncmVjdCcpXG5cdFx0LmRhdGEoZGF0YSk7XG5cdGJhcnMuZW50ZXIoKS5hcHBlbmQoJ3JlY3QnKVxuXHRcdC5hdHRyKCd3aWR0aCcsIHhTY2FsZS5iYW5kd2lkdGgoKSlcblx0XHQuYXR0cigneCcsIGZ1bmN0aW9uIChkKSB7XG5cdFx0XHRyZXR1cm4geFNjYWxlKGQueWVhcik7XG5cdFx0fSlcblx0XHQuYXR0cigneScsIG1heEJhckhlaWdodClcblx0XHQuYXR0cignaGVpZ2h0JywgMClcblx0XHQuc3R5bGUoJ2ZpbGwnLCAnI0ZGRkZGRicpXG5cdFx0LmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoICcgKyBbeVNjYWxlV2lkdGgsIG1heEJhckhlaWdodCAtIDIwXSArICcpJylcblx0XHQub24oJ21vdXNlb3ZlcicsIGJhclllYXJUaXAuc2hvdylcblx0XHQub24oJ21vdXNlb3V0JywgYmFyWWVhclRpcC5oaWRlKVxuXHRcdC50cmFuc2l0aW9uKClcblx0XHQuZHVyYXRpb24oMTAwMClcblx0XHQuYXR0cigneScsIGZ1bmN0aW9uIChkKSB7XG5cdFx0XHRyZXR1cm4gbWF4QmFySGVpZ2h0IC0geVNjYWxlKGQuYXJ0aWNsZXMpO1xuXHRcdH0pXG5cdFx0LmF0dHIoJ2hlaWdodCcsIGZ1bmN0aW9uIChkKSB7XG5cdFx0XHRyZXR1cm4geVNjYWxlKGQuYXJ0aWNsZXMpO1xuXHRcdH0pXG5cdFx0LnN0eWxlKCdmaWxsJywgJyM4QkMzNEEnKTtcblx0YmFycy5lbnRlcigpLmFwcGVuZCgncmVjdCcpXG5cdFx0LmF0dHIoJ3dpZHRoJywgeFNjYWxlLmJhbmR3aWR0aCgpKVxuXHRcdC5hdHRyKCd4JywgZnVuY3Rpb24gKGQpIHtcblx0XHRcdHJldHVybiB4U2NhbGUoZC55ZWFyKTtcblx0XHR9KVxuXHRcdC5hdHRyKCd5JywgZnVuY3Rpb24gKGQpIHtcblx0XHRcdGlmIChkLmFydGljbGVzID4gMCkgcmV0dXJuIG1heEJhckhlaWdodCAtIHlTY2FsZShkLndvcmtzKSAtIHN0YWNrTWFyZ2luO1xuXHRcdFx0ZWxzZSByZXR1cm4gbWF4QmFySGVpZ2h0IC0geVNjYWxlKGQud29ya3MpXG5cdFx0fSlcblx0XHQuYXR0cignaGVpZ2h0JywgMClcblx0XHQuc3R5bGUoJ2ZpbGwnLCByZWQpXG5cdFx0LmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoICcgKyBbeVNjYWxlV2lkdGgsIG1heEJhckhlaWdodCAtIDIwXSArICcpJylcblx0XHQub24oJ21vdXNlb3ZlcicsIGJhclllYXJUaXAuc2hvdylcblx0XHQub24oJ21vdXNlb3V0JywgYmFyWWVhclRpcC5oaWRlKVxuXHRcdC50cmFuc2l0aW9uKClcblx0XHQuZHVyYXRpb24oMTAwMClcblx0XHQuYXR0cigneScsIGZ1bmN0aW9uIChkKSB7XG5cdFx0XHRpZiAoZC5hcnRpY2xlcyA+IDApIHJldHVybiBtYXhCYXJIZWlnaHQgLSB5U2NhbGUoZC53b3JrcyAtIGQuZWRpdHMpIC0gc3RhY2tNYXJnaW47XG5cdFx0XHRlbHNlIHJldHVybiBtYXhCYXJIZWlnaHQgLSB5U2NhbGUoZC53b3Jrcylcblx0XHR9KVxuXHRcdC5hdHRyKCdoZWlnaHQnLCBmdW5jdGlvbiAoZCkge1xuXHRcdFx0cmV0dXJuIHlTY2FsZShkLmJvb2tzKTtcblx0XHR9KTtcblx0YmFycy5lbnRlcigpLmFwcGVuZCgncmVjdCcpXG5cdFx0LmF0dHIoJ3dpZHRoJywgeFNjYWxlLmJhbmR3aWR0aCgpKVxuXHRcdC5hdHRyKCd4JywgZnVuY3Rpb24gKGQpIHtcblx0XHRcdHJldHVybiB4U2NhbGUoZC55ZWFyKTtcblx0XHR9KVxuXHRcdC5hdHRyKCd5JywgZnVuY3Rpb24gKGQpIHtcblx0XHRcdGlmIChkLmFydGljbGVzID4gMCB8fCBkLmJvb2tzID4gMCkgcmV0dXJuIG1heEJhckhlaWdodCAtIHlTY2FsZShkLndvcmtzKSAtIHN0YWNrTWFyZ2luO1xuXHRcdFx0ZWxzZSByZXR1cm4gbWF4QmFySGVpZ2h0IC0geVNjYWxlKGQud29ya3MpXG5cdFx0fSlcblx0XHQuYXR0cignaGVpZ2h0JywgMClcblx0XHQuc3R5bGUoJ2ZpbGwnLCAneWVsbG93Jylcblx0XHQuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSggJyArIFt5U2NhbGVXaWR0aCwgbWF4QmFySGVpZ2h0IC0gMjBdICsgJyknKVxuXHRcdC5vbignbW91c2VvdmVyJywgYmFyWWVhclRpcC5zaG93KVxuXHRcdC5vbignbW91c2VvdXQnLCBiYXJZZWFyVGlwLmhpZGUpXG5cdFx0LnRyYW5zaXRpb24oKVxuXHRcdC5kdXJhdGlvbigxMDAwKVxuXHRcdC5hdHRyKCd5JywgZnVuY3Rpb24gKGQpIHtcblx0XHRcdGlmIChkLmFydGljbGVzID4gMCAmJiBkLmJvb2tzID4gMCkgcmV0dXJuIG1heEJhckhlaWdodCAtIHlTY2FsZShkLndvcmtzKSAtIDIqc3RhY2tNYXJnaW47XG5cdFx0XHRlbHNlIGlmIChkLmFydGljbGVzID4gMCB8fCBkLmJvb2tzID4gMCkgcmV0dXJuIG1heEJhckhlaWdodCAtIHlTY2FsZShkLndvcmtzKSAtIHN0YWNrTWFyZ2luO1xuXHRcdFx0ZWxzZSByZXR1cm4gbWF4QmFySGVpZ2h0IC0geVNjYWxlKGQuZWRpdHMpXG5cdFx0fSlcblx0XHQuYXR0cignaGVpZ2h0JywgZnVuY3Rpb24gKGQpIHtcblx0XHRcdHJldHVybiB5U2NhbGUoZC5lZGl0cyk7XG5cdFx0fSlcbi8vICAgICAgICAgICAgICAgIC5zdHlsZSgnZmlsbCcsICcjOEJDMzRBJyk7XG5cblx0YmFycy5leGl0KClcblx0XHQudHJhbnNpdGlvbigpXG5cdFx0LmR1cmF0aW9uKDMwMClcblx0XHQuYXR0cignd2lkdGgnLCAwKVxuXHRcdC5yZW1vdmUoKTtcblx0dmFyIHhBeGlzID0gZDMuYXhpc0JvdHRvbSh4U2NhbGUpO1xuXHRzdmcuYXBwZW5kKCdnJykuYXR0cignaWQnLCAneC1heGlzJykuY2FsbCh4QXhpcykuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSggJyArIFstd2lkdGgsIGhlaWdodCAvIDJdICsgJyknKS50cmFuc2l0aW9uKCkuZHVyYXRpb24oMTAwMCkuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSggJyArIFt5U2NhbGVXaWR0aCwgaGVpZ2h0IC0gMjBdICsgJyknKTtcblx0dmFyIHlBeGlzID0gZDMuYXhpc0xlZnQoeVNjYWxlLmRvbWFpbih5U2NhbGUuZG9tYWluKCkucmV2ZXJzZSgpKSk7XG5cdHN2Zy5hcHBlbmQoJ2cnKS5hdHRyKCdpZCcsICd5LWF4aXMnKS5jYWxsKHlBeGlzKS5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCAnICsgWzAsIGhlaWdodCAqIDJdICsgJyknKS50cmFuc2l0aW9uKCkuZHVyYXRpb24oMTAwMCkuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSggJyArIFszMCwgaGVpZ2h0IC0gbWF4QmFySGVpZ2h0IC0gMjBdICsgJyknKTtcblx0Ly9zdmcuc2VsZWN0KCdnJykuY2FsbCh4QXhpcykuYXR0cignd2lkdGgnLCAwKS50cmFuc2l0aW9uKCkuZHVyYXRpb24oMTAwMCkuYXR0cignd2lkdGgnLCB3aWR0aCk7XG5cbn1cblxuZnVuY3Rpb24gQ29udmVydERiT3V0cHV0SW50b0xlZ2FjeUV4cGVydHVzRm9ybWF0KGRhdGEsIG1haW5OYW1lKSB7IC8vWyB7YXV0aG9yczogW2F1dGhvcjEsIGF1dGhvcjJdfSBdXG5cdHZhciBMZWdhY3lDb2xsYWJvcmF0b3JMaXN0ID0gW107XG5cblx0ZGF0YS5mb3JFYWNoKGZ1bmN0aW9uICh3b3JrKSB7XG5cdFx0dmFyIHNpbmdsZVdvcmtBdXRob3JzID0gW107XG5cdFx0d29yay5hdXRob3JzLmZvckVhY2goZnVuY3Rpb24gKGF1dGhvcikge1xuXHRcdFx0aWYgKGF1dGhvciAhPSBtYWluTmFtZSkgc2luZ2xlV29ya0F1dGhvcnMucHVzaChhdXRob3IpO1xuXHRcdH0pO1xuXHRcdExlZ2FjeUNvbGxhYm9yYXRvckxpc3QucHVzaChzaW5nbGVXb3JrQXV0aG9ycylcblx0fSk7XG5cblx0cmV0dXJuIExlZ2FjeUNvbGxhYm9yYXRvckxpc3Rcbn1cblxuZnVuY3Rpb24gZ2V0QmFycyhhbGxXb3Jrcykge1xuXHRhbGxXb3JrcyA9IGFsbFdvcmtzLm1hcChmdW5jdGlvbiAoZWwpIHtcblx0XHRpZiAoTnVtYmVyLnBhcnNlSW50KGVsLnllYXIpIDwgMTkwMCkge1xuXHRcdFx0ZWwueWVhciA9IE51bWJlci5wYXJzZUludChlbC55ZWFyKSAtICgtMTAwMCk7XG5cdFx0fVxuXHRcdGVsc2UgZWwueWVhciA9IE51bWJlci5wYXJzZUludChlbC55ZWFyKTtcblx0XHRyZXR1cm4gZWw7XG5cdH0pO1xuXG5cdGFsbFdvcmtzLnNvcnQoZHluYW1pY1NvcnQoJ3llYXInKSk7XG5cblxuXHR2YXIgYmFycyA9IFtdO1xuXHRcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCAoYWxsV29ya3NbYWxsV29ya3MubGVuZ3RoIC0gMV0ueWVhciAtIGFsbFdvcmtzWzBdLnllYXIgLSAoLTEpKTsgaSsrKSB7XG5cdFx0YmFycy5wdXNoKGNvdW50WWVhck9jY3VyZW5jZXMoYWxsV29ya3NbMF0ueWVhciAtICgtaSksIGFsbFdvcmtzKSlcblx0fVxuXG5cdHJldHVybiBiYXJzO1xufVxuXG5mdW5jdGlvbiBjb3VudFllYXJPY2N1cmVuY2VzKHllYXIsIGFycikge1xuXHR2YXIgcmVzT2JqID0ge1xuXHRcdHdvcmtzOiAwLFxuXHRcdGFydGljbGVzOiAwLFxuXHRcdGJvb2tzOiAwLFxuXHRcdGVkaXRzOiAwLFxuXHRcdHllYXI6IHllYXIsXG5cdFx0dGl0bGVzOiBbXVxuXHR9O1xuXHRhcnIuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcblx0XHRpZiAoZWwueWVhciA9PT0geWVhcikge1xuXHRcdFx0cmVzT2JqLndvcmtzKys7XG5cdFx0XHRpZihlbC5wdWJsaWNhdGlvblR5cGUgPT09ICdib29rJykgcmVzT2JqLmJvb2tzKys7XG5cdFx0XHRpZihlbC5wdWJsaWNhdGlvblR5cGUgPT09ICdlZGl0Jykge1xuXHRcdFx0XHRyZXNPYmouZWRpdHMrKztcblx0XHRcdFx0Ly8gY29uc29sZS5sb2coJ1B1c2hpbmcgJyArIGVsLnRpdGxlKVxuXHRcdFx0XHRyZXNPYmoudGl0bGVzLnB1c2goZWwudGl0bGUpO1xuXHRcdFx0fVxuXHRcdFx0aWYoZWwucHVibGljYXRpb25UeXBlID09PSAnYXJ0aWNsZScpIHJlc09iai5hcnRpY2xlcysrO1xuXHRcdH1cblx0fSk7XG5cdHJldHVybiByZXNPYmo7XG59XG5cbmZ1bmN0aW9uIGluY3JlbWVudENvbGxhYm9yYXRpb24oYXJyLCBuYW1lKSB7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG5cdFx0aWYgKGFycltpXS5uYW1lID09PSBuYW1lKSB7XG5cdFx0XHRhcnJbaV0ud29ya3MrKztcblx0XHRcdHJldHVyblxuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBnZXRDb21wbGV0ZUNvbGxhYm9yYXRvckxpc3QoYWxsV29ya3MpIHtcblxuXHR2YXIgYWxsQ29sbGFib3JhdG9ycyA9IFtdO1xuXHR2YXIgYWxsQ29sbGFib3JhdG9yc1dpdGhBbW91bnRzID0gW107XG5cdHZhciBjb2xsYWJvcmF0aW9uQW1vdW50QXJyYXkgPSBbXTtcblx0YWxsV29ya3MuZm9yRWFjaChmdW5jdGlvbiAod29yaykge1xuXHRcdHdvcmsuZm9yRWFjaChmdW5jdGlvbiAocGVyc29uKSB7XG5cdFx0XHRpZiAoIWFsbENvbGxhYm9yYXRvcnMuaW5jbHVkZXMocGVyc29uKSkge1xuXHRcdFx0XHRhbGxDb2xsYWJvcmF0b3JzLnB1c2gocGVyc29uKTtcblx0XHRcdFx0Y29sbGFib3JhdGlvbkFtb3VudEFycmF5LnB1c2goXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0bmFtZTogcGVyc29uLFxuXHRcdFx0XHRcdFx0YW1vdW50OiAwXG5cdFx0XHRcdFx0fSlcblx0XHRcdH1cblxuXHRcdH0pXG5cdH0pO1xuXG5cdGFsbENvbGxhYm9yYXRvcnMuZm9yRWFjaChmdW5jdGlvbiAocGVyc29uKSB7XG5cdFx0YWxsQ29sbGFib3JhdG9yc1dpdGhBbW91bnRzLnB1c2goXG5cdFx0XHR7XG5cdFx0XHRcdG5hbWU6IHBlcnNvbixcblx0XHRcdFx0Y29sbGFib3JhdGlvbnM6IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY29sbGFib3JhdGlvbkFtb3VudEFycmF5KSlcblx0XHRcdH0pXG5cdH0pO1xuXG5cblx0YWxsQ29sbGFib3JhdG9yc1dpdGhBbW91bnRzLmZvckVhY2goZnVuY3Rpb24gKGNvbGxhYm9yYXRvciwgaW5kZXgsIGFycikge1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYWxsV29ya3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlmIChhbGxXb3Jrc1tpXS5pbmNsdWRlcyhjb2xsYWJvcmF0b3IubmFtZSkpIHtcblx0XHRcdFx0YWxsV29ya3NbaV0uZm9yRWFjaChmdW5jdGlvbiAocGVyc29uKSB7XG5cdFx0XHRcdFx0aW5jcmVtZW50Q29sbGFib3JhdGlvbihjb2xsYWJvcmF0b3IuY29sbGFib3JhdGlvbnMsIHBlcnNvbik7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG5cblx0cmV0dXJuIGFsbENvbGxhYm9yYXRvcnNXaXRoQW1vdW50cztcbn1cblxuZnVuY3Rpb24gY29tcGFyZUNvbGxhYm9yYXRvcnNCeUFtb3VudChhLCBiKSB7XG5cdGlmIChhLmFtb3VudCA8IGIuYW1vdW50KSB7XG5cdFx0cmV0dXJuIC0xO1xuXHR9XG5cdGlmIChhLmFtb3VudCA+IGIuYW1vdW50KSB7XG5cdFx0cmV0dXJuIDE7XG5cdH1cblx0cmV0dXJuIDA7XG59XG5cbmZ1bmN0aW9uIGNsZWFyU3ZnKCkge1xuXHRkMy5zZWxlY3QoJ3N2ZycpLnNlbGVjdEFsbCgnKicpLnJlbW92ZSgpO1xufVxuZnVuY3Rpb24gRGVjbGluYXRlUG9saXNoV29yZFByYWNhKHdvcmQsIG51bWJlcikge1xuXHRzd2l0Y2ggKHdvcmQpIHtcblx0XHRjYXNlICdwcmFjYSc6XG5cdFx0XHRpZiAobnVtYmVyID09PSAxKSByZXR1cm4gbnVtYmVyICsgJyBwcmFjYSdcblx0XHRcdGlmIChudW1iZXIgPj0gMiAmJiBudW1iZXIgPD0gNCkgcmV0dXJuIG51bWJlciArICcgcHJhY2UnXG5cdFx0XHRyZXR1cm4gbnVtYmVyICsgJyBwcmFjJ1xuXHRcdGNhc2UgJ3JlZGFnb3dhbmEnOlxuXHRcdFx0aWYgKG51bWJlciA9PT0gMSkgcmV0dXJuICcgcmVkYWdvd2FuYSdcblx0XHRcdGlmIChudW1iZXIgPj0gMiAmJiBudW1iZXIgPD0gNCkgcmV0dXJuICcgcmVkYWdvd2FuZSdcblx0XHRcdHJldHVybiAnIHJlZGFnb3dhbnljaCc7XG5cdH1cblxufVxuXG5mdW5jdGlvbiBkeW5hbWljU29ydChwcm9wZXJ0eSkge1xuXHR2YXIgc29ydE9yZGVyID0gMTtcblx0aWYgKHByb3BlcnR5WzBdID09PSBcIi1cIikge1xuXHRcdHNvcnRPcmRlciA9IC0xO1xuXHRcdHByb3BlcnR5ID0gcHJvcGVydHkuc3Vic3RyKDEpO1xuXHR9XG5cdHJldHVybiBmdW5jdGlvbiAoYSwgYikge1xuXHRcdHZhciByZXN1bHQgPSAoYVtwcm9wZXJ0eV0gPCBiW3Byb3BlcnR5XSkgPyAtMSA6IChhW3Byb3BlcnR5XSA+IGJbcHJvcGVydHldKSA/IDEgOiAwO1xuXHRcdHJldHVybiByZXN1bHQgKiBzb3J0T3JkZXI7XG5cdH1cbn1cbmZ1bmN0aW9uIGRpc3BsYXlXb3JrU3RhdHNXb3Jrc0luVGltZShkYXRhKSB7XG5cblx0dmFyIGRpc3BsYXlWYWx1ZXMgPSB7XG5cdFx0bWVhblBlclllYXI6IDAsXG5cdFx0c3VtT2ZXb3JrczogMCxcblx0XHRzdW1PZkFydGljbGVzOiAwXG5cdH07XG5cblx0ZGF0YS5mb3JFYWNoKGZ1bmN0aW9uICh5ZWFyLCBpbmRleCkge1xuXHRcdGRpc3BsYXlWYWx1ZXMuc3VtT2ZXb3JrcyArPSBOdW1iZXIucGFyc2VJbnQoeWVhci53b3Jrcyk7XG5cdFx0ZGlzcGxheVZhbHVlcy5zdW1PZkFydGljbGVzICs9IE51bWJlci5wYXJzZUludCh5ZWFyLmFydGljbGVzKTtcblx0fSk7XG5cdGRpc3BsYXlWYWx1ZXMubWVhblBlclllYXIgPSBkaXNwbGF5VmFsdWVzLnN1bU9mV29ya3MgLyBkYXRhLmxlbmd0aDtcblxuXG5cdCQoJyNtZWFuLXdvcmtzLWFtb3VudC1kaXNwbGF5JykudGV4dChkaXNwbGF5VmFsdWVzLm1lYW5QZXJZZWFyLnRvRml4ZWQoMikpO1xuXHQkKCcjcHVibGljYXRpb25zLWFtb3VudC1kaXNwbGF5JykudGV4dChkaXNwbGF5VmFsdWVzLnN1bU9mQXJ0aWNsZXMpO1xuXHQkKCcjd29ya3MtYW1vdW50LWRpc3BsYXknKS50ZXh0KGRpc3BsYXlWYWx1ZXMuc3VtT2ZXb3Jrcyk7XG59XG5cbi8qXG5mdW5jdGlvbiBnZW5QZGZEb2MoKSB7XG5cdHZhciAkc3ZnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3N2Zy1wb3J0Jylcblx0XHQsIGRvYyA9IG5ldyBQREZEb2N1bWVudCh7XG5cdFx0bGF5b3V0OiAnbGFuZHNjYXBlJ1xuXHR9KVxuXHRcdCwgc3RyZWFtID0gZG9jLnBpcGUoYmxvYlN0cmVhbSgpKTtcblx0ZG9jLmZvbnRTaXplKDI1KVxuXHRcdC50ZXh0KCdMaWN6YmEgcHVibGlrYWNqaSB3IGN6YXNpZScsIDEwMCwgNDApO1xuXHRkb2MuZm9udFNpemUoMTIpXG5cdFx0LnRleHQoJ1d5Z2VuZXJvd2FubyBwcnpleiAnLCB7XG5cdFx0XHRjb250aW51ZWQ6IHRydWVcblx0XHR9KVxuXHRcdC50ZXh0KCdXaXp1YWxpemF0b3IgRG9yb2JrdSBOYXVrb3dlZ28nLCB7XG5cdFx0XHRjb250aW51ZWQ6IHRydWUsXG5cdFx0XHRsaW5rOiAnaHR0cDovL3Zpc3VhbGl6ZW1lLnVtay5wbCdcblx0XHR9KVxuXHRcdC50ZXh0KCcgZGxhICcgKyBhdXRob3JOYW1lLm5vcm1hbGl6ZSgnTkZEJykucmVwbGFjZSgvW1xcdTAzMDAtXFx1MDM2Zl0vZywgXCJcIikpO1xuXG5cblx0dmFyIHNjYWxlID0gZG9jLnBhZ2Uud2lkdGggLyAkc3ZnLndpZHRoLmJhc2VWYWwudmFsdWU7XG5cdHZhciB3aWR0aCA9ICRzdmcud2lkdGguYmFzZVZhbC52YWx1ZTtcblx0dmFyIGhlaWdodCA9ICRzdmcuaGVpZ2h0LmJhc2VWYWwudmFsdWU7XG5cdGNvbnNvbGUubG9nKHNjYWxlKTtcbi8vICAgICAgICAkc3ZnID0gJHN2Zy5jbG9uZU5vZGUodHJ1ZSk7XG5cdCRzdmcuc2V0QXR0cmlidXRlKCd0cmFuc2Zvcm0nLCAnc2NhbGUoJyArIHNjYWxlICsgJyknKTtcblxuXHRTVkd0b1BERihkb2MsICRzdmcsIDEwMCwgMCwge3dpZHRoOiB3aWR0aCwgaGVpZ2h0OiBoZWlnaHR9KTtcblxuXG5cblxuXG5cdHN0cmVhbS5vbignZmluaXNoJywgZnVuY3Rpb24oKSB7XG5cdFx0Y29uc29sZS5sb2coc3RyZWFtLnRvQmxvYlVSTCgnYXBwbGljYXRpb24vcGRmJykpO1xuXHRcdHdpbmRvdy5sb2NhdGlvbiA9IHN0cmVhbS50b0Jsb2JVUkwoJ2FwcGxpY2F0aW9uL3BkZicpO1xuXHR9KTtcblx0ZG9jLmVuZCgpO1xuXG59Ki9cbiJdLCJzb3VyY2VSb290IjoiIn0=